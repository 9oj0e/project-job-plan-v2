{{>layout/header}}
<!-- 바디 start -->
<div class="modal" id="skillForm" tabindex="-1">
    <div class="modal-dialog">
        <form {{^skillList}}action="/users/{{sessionUser.id}}/skill/add"{{/skillList}}{{#skillList}}action="/users/{{sessionUser.id}}/skill/update"{{/skillList}} method="post">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">기술 스택</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h4 class="card-title">스킬 추가</h4>
                    <table class="table">
                        <tr>
                            <td>
                                <div>java</div>
                            </td>
                            <td style="text-align: center">
                                <input type="checkbox" name="skill" value="java">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div>javaScript</div>
                            </td>
                            <td style="text-align: center">
                                <input type="checkbox" name="skill" value="javaScript">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div>Spring</div>
                            </td>
                            <td style="text-align: center">
                                <input type="checkbox" name="skill" value="Spring">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div>HTML</div>
                            </td>
                            <td style="text-align: center">
                                <input type="checkbox" name="skill" value="HTML">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div>jQuery</div>
                            </td>
                            <td style="text-align: center">
                                <input type="checkbox" name="skill" value="jQuery">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div>MySQL</div>
                            </td>
                            <td style="text-align: center">
                                <input type="checkbox" name="skill" value="MySQL">
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                    <button type="submit" class="btn btn-primary">완료</button>
                </div>
            </div>
        </form>
    </div>
</div>
{{#profileDTO}}
    <main class="main-size">
    <div class="div-body">
        <div class="div-layout" style="height: 600px">
            <div class="d-flex justify-content-between">
                <h5>안녕하세요, {{sessionUser.name}}님</h5>
                <div style="display: flex; justify-content: space-evenly; width: 150px">
                    <form action="/users/{{sessionUser.id}}/update-form"> <!-- 수정 하기 -->
                        <button class="btn btn-outline-warning">
                            <i class="fa-solid fa-user-pen icon-size"></i>
                        </button>
                    </form>
                    <form action="/users/{{sessionUser.id}}/delete"> <!-- 탈퇴 하기 -->
                        <button class="btn btn-outline-danger">
                            <i class="fa-solid fa-user-xmark icon-size"></i>
                        </button>
                    </form>
                </div>
            </div>
            <div class="div-information">
                <div class="div-information-grid">
                    <div class="card mt-5" style="width:200px">
                        {{#rating}}
                            <table class="table borderless">
                                <tr>
                                    <td style="text-align: end; padding-bottom: 0; padding-top: 0">평점 ⭐</td>
                                    <td style="text-align: start; padding-bottom: 0; padding-top: 0">{{rating}}</td>
                                </tr>
                            </table>
                        {{/rating}}
                        {{#isEmployer}}
                            <div>
                                {{#pic}}
                                    <img class="card-img" src="/upload/{{imgFilename}}" style="width:100%;">
                                {{/pic}}
                                {{^pic}}
                                    <img class="card-img" src="/../images/{{businessName}}.jpg"
                                         onerror="this.src='../../images/chaeyong.jpg'" style="width:100%;">
                                {{/pic}}
                            </div>
                            <div class="card-body">
                                <h4>{{businessName}}</h4>
                            </div>
                            <div class="card-footer">
                                <div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px">
                                    {{#pic}}
                                        <form action="/deleteImg" method="post">
                                            <input type="hidden" name="userId" value="{{pic.userId}}">
                                            <button class="btn btn-primary">삭제</button>
                                        </form>
                                    {{/pic}}
                                    {{^pic}}
                                        <form action="/post-form/{{sessionUser.id}}" method="get">
                                            <button class="btn btn-outline-primary">
                                                <i class="fa-solid fa-plus icon-size"></i>
                                            </button>
                                        </form>
                                    {{/pic}}
                                </div>
                            </div>
                        {{/isEmployer}}
                        {{^isEmployer}}
                            {{#userPic}}
                                <img class="card-img" src="/upload/{{userPic.imgFilename}}" style="width:100%">
                            {{/userPic}}
                            {{^userPic}}
                                {{#userPic2}}
                                    <img class="card-img" src="/upload/{{userPic2}}"
                                         onerror="this.src='../images/avatar.png'" style="width:100%">
                                {{/userPic2}}
                                {{^userPic2}}
                                    <img class="card-img" src="../images/avatar.png" style="width:100%">
                                {{/userPic2}}
                            {{/userPic}}
                            <div class="card-body">
                                <h4>{{name}}</h4>
                            </div>
                            <div class="card-footer">
                                <div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px">
                                    {{^userPic}}
                                        <form action="/upload-form/{{id}}" method="get"> <!-- 사진 등록 -->
                                            <button class="btn btn-primary">
                                                <i class="fa-solid fa-plus icon-size"></i>
                                            </button>
                                        </form>
                                    {{/userPic}}
                                    {{#userPic}}
                                        <form action="/deleteImg" method="post"> <!-- 사진 삭제 -->
                                            <input type="hidden" name="userId" value="{{userPic.userId}}">
                                            <button class="btn btn-outline-primary">
                                                <i class="fa-solid fa-minus icon-size"></i>
                                            </button>
                                        </form>
                                    {{/userPic}}
                                </div>
                            </div>
                        {{/isEmployer}}
                    </div>
                </div>
                <div>
                    <table class="table">
                        <thead>
                        {{#isEmployer}}
                            <tr>
                                <th><h3>기업정보</h3></th>
                            </tr>
                        {{/isEmployer}}
                        {{^isEmployer}}
                            <tr>
                                <th><h3>개인정보</h3></th>
                            </tr>
                        {{/isEmployer}}
                        </thead>
                        <tbody>
                        <tr>
                            <th>아이디</th>
                            <td>{{username}}</td>
                        </tr>
                        <tr>
                            <th>이름</th>
                            <td>{{name}}</td>
                        </tr>
                        <tr>
                            <th>생년월일</th>
                            <td>{{birthdate}}</td>
                        </tr>
                        <tr>
                            <th>성별</th>
                            <td>{{gender}}</td>
                        </tr>
                        <tr>
                            <th>휴대전화</th>
                            <td>{{phoneNumber}}</td>
                        </tr>
                        <tr>
                            <th>주소</th>
                            <td>{{address}}</td>
                        </tr>
                        <tr>
                            <th>E-MAIL</th>
                            <td>{{email}}</td>
                        </tr>
                        {{#isEmployer}}
                            <tr>
                                <th>사업자번호</th>
                                <td>{{employerIdNumber}}</td>
                            </tr>
                            <tr>
                                <th>회사명</th>
                                <td>{{businessName}}</td>
                            </tr>
                        {{/isEmployer}}
                        </tbody>
                    </table>
                    <!-- 기업
                        <div class="form-control">
                            <div class="mb-3"><b>희망 기술 스택</b></div>
                            <div>
                                {{#skillList}}
                                    <span>{{skillName}}</span>
                                {{/skillList}}
                        {{^skillList}}
                                    <form action="/users/{{sessionUser.id}}/update-form">
                                        <button class="btn btn-outline-primary form-control">추가하기</button>
                                    </form>
                                {{/skillList}}
                            </div>
                        </div>
                        -->
                    {{^isEmployer}}
                        <div class="form-control">
                            <div class="mb-3"><b>보유 기술 스택</b>
                                {{#skillList}}
                                    <button class="btn btn-outline-primary form-control" data-bs-toggle="modal"
                                            data-bs-target="#skillForm">수정하기
                                    </button>
                                {{/skillList}}
                            </div>
                            <div>
                                {{#skillList}}
                                    <span>{{skillName}}</span>
                                {{/skillList}}
                                {{^skillList}}
                                    <button class="btn btn-outline-primary form-control" data-bs-toggle="modal"
                                            data-bs-target="#skillForm">추가하기
                                    </button>
                                {{/skillList}}
                            </div>
                        </div>
                    {{/isEmployer}}
                </div>
            </div>
        </div>
    {{#isEmployer}}
            <!-- 내 공고 보기 -->
            <div class="div-layout">
                <div class="div-header d-flex justify-content-between">
                    <h3><b>공고 관리</b></h3>
                    <form action="/boards/post-form" method="get" class="justify-content-end">
                        <button class="btn btn-primary">추가</button>
                    </form>
                </div>
                <div class="div-announcement">
                    <table class="table table-hover" style="text-align: center">
                        <tr>
                            <th>포지션</th>
                            <th>채용 분야</th>
                            <th>공고 제목</th>
                            <th>게시일</th>
                            <th></th>
                        </tr>
                        {{#boardList}}
                            <tr>
                                <td>{{position}}</td>
                                <td>{{field}}</td>
                                <td><a href="/boards/{{id}}">{{title}}</a></td>
                                <td>{{openingDate}}</td>
                                <td>
                                    <div style="display: flex; justify-content: space-evenly">
                                        <form action="/users/{{sessionUser.id}}/boards/{{id}}" method="get">
                                            <button class="btn btn-outline-primary">지원자</button>
                                        </form>
                                        <form action="/boards/{{id}}/update" method="post">
                                            <button class="btn btn-primary">삭제</button>
                                        </form>
                                    </div>
                                </td>
                            </tr>
                        {{/boardList}}
                    </table>
                </div>
            </div>
    {{/isEmployer}}
    {{^isEmployer}}
            <!--내 이력서 보기-->
            <div class="div-layout">
                <div class="div-header d-flex justify-content-between">
                    <h2><b>나의 이력서</b></h2>
                    <form action="/resumes/post-form" method="get">
                        <button class="btn btn-primary">추가</button>
                    </form>
                </div>
                <div class="div-resume">
                    <table class="table table-hover" style="text-align: center">
                        <tr>
                            <td>제목</td>
                            <td>게시일자</td>
                            <td></td>
                        </tr>
                        {{#resumeList}}
                            <tr>
                                <td><a href="/resumes/{{id}}">{{title}}</a></td>
                                <td>{{createdAt}}</td>
                                <td>
                                    <div style="display: flex; justify-content: end">
                                        <form action="/resumes/{{id}}/update-form">
                                            <button class="btn btn-outline-primary">수정</button>&nbsp;
                                        </form>
                                        <form action="/resumes/{{id}}/delete" method="post">
                                            <button class="btn btn-primary">삭제</button>
                                        </form>
                                        <!--공고별 지원 현황 보기?-->
                                    </div>
                                </td>
                            </tr>
                        {{/resumeList}}
                    </table>
                </div>
            </div>
    {{/isEmployer}}
    {{#isEmployer}}
            <div class="div-layout">
                <div class="div-header d-flex justify-content-between">
                    <h3><b>지원자 리스트</b></h3>
                    <form action="/users/{{sessionUser.id}}" method="get" class="justify-content-end">
                        <button class="btn btn-primary">전체</button>
                    </form>
                </div>
                <table class="table table-hover" style="text-align: center">
                    <tr>
                        <th>공고 제목</th>
                        <th>지원자 명</th>
                        <th>이력서 제목</th>
                        <th>지원 날짜</th>
                        <th></th>
                    </tr>
                    {{#applyList}}
                        <tr>
                            <td><a href="/boards/{{boardId}}">{{boardTitle}}</a></td>
                            <td>{{applicantName}}</td>
                            <td><a href="/resumes/{{resumeId}}">{{resumeTitle}}</a></td>
                            <td>{{createdAt}}</td>
                            <td>
                                <div style="display: flex; justify-content: space-evenly">
                                    {{#status}}
                                        <div>{{status}}</div>
                                    {{/status}}
                                    {{^status}}
                                        <form action="/apply/update" method="post">
                                            <input name="status" type="hidden" value="0">
                                            <input name="id" type="hidden" value="{{id}}">
                                            <button class="btn btn-outline-danger">불합격</button>
                                        </form>
                                        <form action="/apply/update" method="post">
                                            <input name="status" type="hidden" value="1">
                                            <input name="id" type="hidden" value="{{id}}">
                                            <button class="btn btn-outline-primary">합격</button>
                                        </form>
                                    {{/status}}
                                </div>
                            </td>
                        </tr>
                    {{/applyList}}
                </table>
            </div>
    {{/isEmployer}}
    {{^isEmployer}}
            <div class="div-layout">
                <div class="div-header d-flex justify-content-between" style="text-align: end">
                    <h2><b>나의 지원현황</b></h2>
                    <!--전체 보기 버튼?-->
                </div>
                <div class="div-resume">
                    <table class="table table-hover" style="text-align: center">
                        <tr>
                            <th>이력서 제목</th>
                            <th>회사명</th>
                            <th>공고 제목</th>
                            <th>지원 날짜</th>
                            <th></th>
                        </tr>
                        {{#applyList}}
                            <tr>
                                <td><a href="/resumes/{{resumeId}}">{{resumeTitle}}</a></td>
                                <td>{{businessName}}</td>
                                <td><a href="/boards/{{boardId}}">{{boardTitle}}</a></td>
                                <td>{{createdAt}}</td>
                                <td>
                                    <div style="display: flex; justify-content: space-evenly">
                                        {{#status}}
                                            <div>{{status}}</div>
                                        {{/status}}
                                        {{^status}}
                                            <div>대기중</div>
                                        {{/status}}
                                    </div>
                                </td>
                            </tr>
                        {{/applyList}}
                    </table>
                </div>
            </div>
    {{/isEmployer}}
{{/profileDTO}}
</div>
</main>
<!-- 바디 end -->
{{>layout/footer}}